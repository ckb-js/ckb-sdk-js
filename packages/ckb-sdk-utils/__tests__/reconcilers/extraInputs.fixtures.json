{
  "change is enough for fee": {
    "params": [
      {
        "tx": {
          "version": "0x0",
          "cellDeps": [
            {
              "outPoint": {
                "txHash": "0xc12386705b5cbb312b693874f3edf45c43a274482e27b8df0fd80c8d3f5feb8b",
                "index": "0x0"
              },
              "depType": "depGroup"
            },
            {
              "outPoint": {
                "txHash": "0x0fb4945d52baf91e0dee2a686cdd9d84cad95b566a1d7409b970ee0a0f364f60",
                "index": "0x2"
              },
              "depType": "code"
            }
          ],
          "headerDeps": [],
          "inputs": [
            {
              "previousOutput": {
                "txHash": "0x31f695263423a4b05045dd25ce6692bb55d7bba2965d8be16b036e138e72cc65",
                "index": "0x1"
              },
              "since": "0x0"
            }
          ],
          "outputs": [
            {
              "capacity": "0x174876e800",
              "lock": {
                "codeHash": "0x68d5438ac952d2f584abf879527946a537e82c7f3c1cbf6d8ebf9767437d8e88",
                "args": "0x59a27ef3ba84f061517d13f42cf44ed020610061",
                "hashType": "type"
              },
              "type": {
                "codeHash": "0xece45e0979030e2f8909f76258631c42333b1e906fd9701ec3600a464a90b8f6",
                "args": "0x",
                "hashType": "data"
              }
            },
            {
              "capacity": "0x16b969f18",
              "lock": {
                "codeHash": "0x68d5438ac952d2f584abf879527946a537e82c7f3c1cbf6d8ebf9767437d8e88",
                "args": "0x59a27ef3ba84f061517d13f42cf44ed020610061",
                "hashType": "type"
              },
              "type": null
            }
          ],
          "outputsData": ["0x1234", "0x"],
          "witnesses": [
            "0x82df73581bcd08cb9aa270128d15e79996229ce8ea9e4f985b49fbf36762c5c37936caf3ea3784ee326f60b8992924fcf496f9503c907982525a3436f01ab32900"
          ]
        },
        "feeRate": "1000",
        "changeThreshold": "6100000000",
        "cells": [],
        "extraCount": 1
      }
    ],
    "expected": {
      "version": "0x0",
      "cellDeps": [
        {
          "outPoint": {
            "txHash": "0xc12386705b5cbb312b693874f3edf45c43a274482e27b8df0fd80c8d3f5feb8b",
            "index": "0x0"
          },
          "depType": "depGroup"
        },
        {
          "outPoint": {
            "txHash": "0x0fb4945d52baf91e0dee2a686cdd9d84cad95b566a1d7409b970ee0a0f364f60",
            "index": "0x2"
          },
          "depType": "code"
        }
      ],
      "headerDeps": [],
      "inputs": [
        {
          "previousOutput": {
            "txHash": "0x31f695263423a4b05045dd25ce6692bb55d7bba2965d8be16b036e138e72cc65",
            "index": "0x1"
          },
          "since": "0x0"
        }
      ],
      "outputs": [
        {
          "capacity": "0x174876e800",
          "lock": {
            "codeHash": "0x68d5438ac952d2f584abf879527946a537e82c7f3c1cbf6d8ebf9767437d8e88",
            "args": "0x59a27ef3ba84f061517d13f42cf44ed020610061",
            "hashType": "type"
          },
          "type": {
            "codeHash": "0xece45e0979030e2f8909f76258631c42333b1e906fd9701ec3600a464a90b8f6",
            "args": "0x",
            "hashType": "data"
          }
        },
        {
          "capacity": "0x16b969d00",
          "lock": {
            "codeHash": "0x68d5438ac952d2f584abf879527946a537e82c7f3c1cbf6d8ebf9767437d8e88",
            "args": "0x59a27ef3ba84f061517d13f42cf44ed020610061",
            "hashType": "type"
          },
          "type": null
        }
      ],
      "outputsData": ["0x1234", "0x"],
      "witnesses": [
        "0x82df73581bcd08cb9aa270128d15e79996229ce8ea9e4f985b49fbf36762c5c37936caf3ea3784ee326f60b8992924fcf496f9503c907982525a3436f01ab32900"
      ]
    }
  },
  "Should add two input when \nfee: 5360000000\nfee rate: 10000000000\nchange: 7000000000\nlack: 4460000000\ncells: [2670000000, 2670000001]": {
    "params": [
      {
        "tx": {
          "version": "0x0",
          "cellDeps": [
            {
              "outPoint": {
                "txHash": "0xc12386705b5cbb312b693874f3edf45c43a274482e27b8df0fd80c8d3f5feb8b",
                "index": "0x0"
              },
              "depType": "depGroup"
            },
            {
              "outPoint": {
                "txHash": "0x0fb4945d52baf91e0dee2a686cdd9d84cad95b566a1d7409b970ee0a0f364f60",
                "index": "0x2"
              },
              "depType": "code"
            }
          ],
          "headerDeps": [],
          "inputs": [
            {
              "previousOutput": {
                "txHash": "0x31f695263423a4b05045dd25ce6692bb55d7bba2965d8be16b036e138e72cc65",
                "index": "0x1"
              },
              "since": "0x0"
            }
          ],
          "outputs": [
            {
              "capacity": "0x174876e800",
              "lock": {
                "codeHash": "0x68d5438ac952d2f584abf879527946a537e82c7f3c1cbf6d8ebf9767437d8e88",
                "args": "0x59a27ef3ba84f061517d13f42cf44ed020610061",
                "hashType": "type"
              },
              "type": {
                "codeHash": "0xece45e0979030e2f8909f76258631c42333b1e906fd9701ec3600a464a90b8f6",
                "args": "0x",
                "hashType": "data"
              }
            },
            {
              "capacity": "0x1a13b8600",
              "lock": {
                "codeHash": "0x68d5438ac952d2f584abf879527946a537e82c7f3c1cbf6d8ebf9767437d8e88",
                "args": "0x59a27ef3ba84f061517d13f42cf44ed020610061",
                "hashType": "type"
              },
              "type": null
            }
          ],
          "outputsData": ["0x1234", "0x"],
          "witnesses": [
            "0x82df73581bcd08cb9aa270128d15e79996229ce8ea9e4f985b49fbf36762c5c37936caf3ea3784ee326f60b8992924fcf496f9503c907982525a3436f01ab32900"
          ]
        },
        "feeRate": "10000000000",
        "changeThreshold": "6100000000",
        "cells": [
          {
            "capacity": "0x9f24f780",
            "outPoint": {
              "txHash": "0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",
              "index": "0x1"
            }
          },
          {
            "capacity": "0x9f24f781",
            "outPoint": {
              "txHash": "0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",
              "index": "0x2"
            }
          }
        ],
        "extraCount": 3
      }
    ],
    "expected": {
      "version": "0x0",
      "cellDeps": [
        {
          "outPoint": {
            "txHash": "0xc12386705b5cbb312b693874f3edf45c43a274482e27b8df0fd80c8d3f5feb8b",
            "index": "0x0"
          },
          "depType": "depGroup"
        },
        {
          "outPoint": {
            "txHash": "0x0fb4945d52baf91e0dee2a686cdd9d84cad95b566a1d7409b970ee0a0f364f60",
            "index": "0x2"
          },
          "depType": "code"
        }
      ],
      "headerDeps": [],
      "inputs": [
        {
          "previousOutput": {
            "txHash": "0x31f695263423a4b05045dd25ce6692bb55d7bba2965d8be16b036e138e72cc65",
            "index": "0x1"
          },
          "since": "0x0"
        },
        {
          "previousOutput": {
            "txHash": "0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",
            "index": "0x1"
          },
          "since": "0x0"
        },
        {
          "previousOutput": {
            "txHash": "0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",
            "index": "0x2"
          },
          "since": "0x0"
        }
      ],
      "outputs": [
        {
          "capacity": "0x174876e800",
          "lock": {
            "codeHash": "0x68d5438ac952d2f584abf879527946a537e82c7f3c1cbf6d8ebf9767437d8e88",
            "args": "0x59a27ef3ba84f061517d13f42cf44ed020610061",
            "hashType": "type"
          },
          "type": {
            "codeHash": "0xece45e0979030e2f8909f76258631c42333b1e906fd9701ec3600a464a90b8f6",
            "args": "0x",
            "hashType": "data"
          }
        },
        {
          "capacity": "0x16b969d01",
          "lock": {
            "codeHash": "0x68d5438ac952d2f584abf879527946a537e82c7f3c1cbf6d8ebf9767437d8e88",
            "args": "0x59a27ef3ba84f061517d13f42cf44ed020610061",
            "hashType": "type"
          },
          "type": null
        }
      ],
      "outputsData": ["0x1234", "0x"],
      "witnesses": [
        "0x82df73581bcd08cb9aa270128d15e79996229ce8ea9e4f985b49fbf36762c5c37936caf3ea3784ee326f60b8992924fcf496f9503c907982525a3436f01ab32900"
      ]
    }
  },
  "Fail to reconcile when \nfee: 5360000000\nfee rate: 10000000000\nchange: 7000000000\nlack: 4460000000\ncells: [2670000000, 2669999999]": {
    "params": [
      {
        "tx": {
          "version": "0x0",
          "cellDeps": [
            {
              "outPoint": {
                "txHash": "0xc12386705b5cbb312b693874f3edf45c43a274482e27b8df0fd80c8d3f5feb8b",
                "index": "0x0"
              },
              "depType": "depGroup"
            },
            {
              "outPoint": {
                "txHash": "0x0fb4945d52baf91e0dee2a686cdd9d84cad95b566a1d7409b970ee0a0f364f60",
                "index": "0x2"
              },
              "depType": "code"
            }
          ],
          "headerDeps": [],
          "inputs": [
            {
              "previousOutput": {
                "txHash": "0x31f695263423a4b05045dd25ce6692bb55d7bba2965d8be16b036e138e72cc65",
                "index": "0x1"
              },
              "since": "0x0"
            }
          ],
          "outputs": [
            {
              "capacity": "0x174876e800",
              "lock": {
                "codeHash": "0x68d5438ac952d2f584abf879527946a537e82c7f3c1cbf6d8ebf9767437d8e88",
                "args": "0x59a27ef3ba84f061517d13f42cf44ed020610061",
                "hashType": "type"
              },
              "type": {
                "codeHash": "0xece45e0979030e2f8909f76258631c42333b1e906fd9701ec3600a464a90b8f6",
                "args": "0x",
                "hashType": "data"
              }
            },
            {
              "capacity": "0x1a13b8600",
              "lock": {
                "codeHash": "0x68d5438ac952d2f584abf879527946a537e82c7f3c1cbf6d8ebf9767437d8e88",
                "args": "0x59a27ef3ba84f061517d13f42cf44ed020610061",
                "hashType": "type"
              },
              "type": null
            }
          ],
          "outputsData": ["0x1234", "0x"],
          "witnesses": [
            "0x82df73581bcd08cb9aa270128d15e79996229ce8ea9e4f985b49fbf36762c5c37936caf3ea3784ee326f60b8992924fcf496f9503c907982525a3436f01ab32900"
          ]
        },
        "feeRate": "10000000000",
        "changeThreshold": "6100000000",
        "cells": [
          {
            "capacity": "0x9f24f780",
            "outPoint": {
              "txHash": "0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",
              "index": "0x1"
            }
          },
          {
            "capacity": "0x9f24f77f",
            "outPoint": {
              "txHash": "0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",
              "index": "0x2"
            }
          }
        ],
        "extraCount": 3
      }
    ],
    "exception": "Fail to reconcile transaction, try to increase extra count or check the transaction"
  }
}
